FROM kitodepi AS build

WORKDIR /app

COPY . .

ENV AWS_REGION=${AWS_REGION}
ENV WHITE_RIBBON=${WHITE_RIBBON}
ENV BLACK_RIBBON=${BLACK_RIBBON}
ENV JWT_KEY=${JWT_KEY}
ENV JWT_GEN=${JWT_GEN}
ENV PROFILE_PIC_BUCKET=${PROFILE_PIC_BUCKET}
ENV MYSQL_USERNAME=${MYSQL_USERNAME}
ENV MYSQL_PASSWORD=${MYSQL_PASSWORD}
ENV MYSQL_HOST=host.docker.internal
ENV MYSQL_PORT=3306
ENV DB_NAME=${DB_NAME}

RUN mvn clean test
